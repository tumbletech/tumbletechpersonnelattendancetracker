<!DOCTYPE html>
<html lang="en">
    <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1">
            <title>Admin Dashboard - Tumbletech Employee Portal</title>
            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
            <style>
                body {
                background-color: #f0f2f5;
                }
                .sidebar {
                height: 100vh;
                background-color: #343a40;
                padding-top: 1rem;
                }
                .sidebar a {
                color: #fff;
                display: block;
                padding: 0.75rem 1.25rem;
                text-decoration: none;
                }
                .sidebar a:hover {
                background-color: #495057;
                }
                .content {
                padding: 2rem;
                }
                .card-stat {
                min-height: 120px;
                }
            </style>
        </head>
        <body>
            <div class="container-fluid">
                <div class="row">
                <!-- Sidebar -->
                <nav class="col-md-2 d-none d-md-block sidebar">
                    <div class="position-sticky">
                    <a href="#">Dashboard</a>
                    <a href="#">Employees</a>
                    <a href="#">Attendance</a>
                    <a href="#">Leaves</a>
                    <a href="#">Announcements</a>
                    <a href="#">Settings</a>
                    </div>
                </nav>

                <!-- Main Content -->
                <main class="col-md-10 ms-sm-auto content">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2>Admin Dashboard</h2>
                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addEmployeeModal">âž• Add Employee</button>
                    </div>

                    <div class="row g-4">
                    <div class="col-md-4">
                        <div class="card card-stat">
                        <div class="card-body">
                            <h5 class="card-title">Total Employees</h5>
                            <p class="card-text display-6">42</p>
                        </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card card-stat">
                        <div class="card-body">
                            <h5 class="card-title">Present Today</h5>
                            <p class="card-text display-6">36</p>
                        </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card card-stat">
                        <div class="card-body">
                            <h5 class="card-title">Pending Leave Requests</h5>
                            <p class="card-text display-6">5</p>
                        </div>
                        </div>
                    </div>
                    </div>

                    <div class="mt-5">
                    <h4>Latest Announcements</h4>
                    <ul class="list-group">
                        <li class="list-group-item">Payroll cut-off is on the 25th.</li>
                        <li class="list-group-item">System maintenance this Saturday 9PM.</li>
                        <li class="list-group-item">Q3 Planning Meeting on August 15.</li>
                    </ul>
                    </div>
                </main>
                </div>
            </div>

            <!-- Add Employee Modal -->
            <div class="modal fade" id="addEmployeeModal" tabindex="-1" aria-labelledby="addEmployeeModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <form id="employeeForm">
                    <div class="modal-header">
                        <h5 class="modal-title" id="addEmployeeModalLabel">Add New Employee</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="row g-3">
                        <div class="col-md-6">
                            <label for="fullName" class="form-label">Full Name</label>
                            <input type="text" class="form-control" id="fullName" name="fullName" required>
                        </div>
                        <div class="col-md-6">
                            <label for="email" class="form-label">Email address</label>
                            <input type="email" class="form-control" id="email" name="email" required>
                        </div>
                        <div class="col-md-6">
                            <label for="birthday" class="form-label">Birthday</label>
                            <input type="date" class="form-control" id="birthday" name="birthday">
                        </div>
                        <div class="col-md-6">
                            <label for="age" class="form-label">Age</label>
                            <input type="number" class="form-control" id="age" name="age" readonly>
                        </div>
                        <div class="col-md-6">
                            <label for="residence" class="form-label">Residence Address</label>
                            <input type="text" class="form-control" id="residence" name="residence">
                        </div>
                        <div class="col-md-6">
                            <label for="mailing" class="form-label">Mailing Address</label>
                            <input type="text" class="form-control" id="mailing" name="mailing">
                            <div class="form-check mt-1">
                            <input class="form-check-input" type="checkbox" id="sameAddress">
                            <label class="form-check-label" for="sameAddress">Same as residence</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <label for="phone" class="form-label">Phone Number</label>
                            <input type="tel" class="form-control" id="phone" name="phone">
                        </div>
                        <div class="col-md-6">
                            <label for="altPhone" class="form-label">Alternate Number</label>
                            <input type="tel" class="form-control" id="altPhone" name="altPhone">
                        </div>
                        <div class="col-md-6">
                            <label for="personalEmail" class="form-label">Personal Email Address</label>
                            <input type="email" class="form-control" id="personalEmail" name="personalEmail">
                        </div>
                        <div class="col-md-6">
                            <label for="emergencyContact" class="form-label">Emergency Contact</label>
                            <input type="text" class="form-control" id="emergencyContact" name="emergencyContact">
                        </div>
                        <div class="col-md-6">
                            <label for="role" class="form-label">Role</label>
                            <select class="form-select" id="role" name="role">
                            <option value="Employee">Employee</option>
                            <option value="HR">HR</option>
                            <option value="Admin">Admin</option>
                            </select>
                        </div>
                        <div class="col-md-6 d-flex align-items-end">
                            <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="true" id="sendWelcome" name="sendWelcome">
                            <label class="form-check-label" for="sendWelcome">
                                Send welcome email (via n8n)
                            </label>
                            </div>
                        </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-success">Add Employee</button>
                    </div>
                    </form>
                </div>
                </div>
            </div>

            <script>
                document.getElementById("sameAddress").addEventListener("change", function() {
                const mailing = document.getElementById("mailing");
                const residence = document.getElementById("residence");
                if (this.checked) {
                    mailing.value = residence.value;
                    mailing.readOnly = true;
                } else {
                    mailing.readOnly = false;
                    mailing.value = "";
                }
                });

                document.getElementById("birthday").addEventListener("change", function() {
                const birthDate = new Date(this.value);
                const today = new Date();
                let age = today.getFullYear() - birthDate.getFullYear();
                const m = today.getMonth() - birthDate.getMonth();
                if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
                    age--;
                }
                document.getElementById("age").value = age;
                });
            </script>

            <script>
            document.getElementById("employeeForm").addEventListener("submit", async function (e) {
                e.preventDefault();

                const data = {
                fullName: document.getElementById("fullName").value,
                email: document.getElementById("email").value,
                birthday: document.getElementById("birthday").value,
                age: document.getElementById("age").value,
                residence: document.getElementById("residence").value,
                mailing: document.getElementById("mailing").value,
                phone: document.getElementById("phone").value,
                altPhone: document.getElementById("altPhone").value,
                personalEmail: document.getElementById("personalEmail").value,
                emergencyContact: document.getElementById("emergencyContact").value,
                role: document.getElementById("role").value,
                sendWelcome: document.getElementById("sendWelcome").checked
                };

                fetch("https://tumbletech.app.n8n.cloud/webhook/add-employee", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/x-www-form-urlencoded"
                    },
                    body: new URLSearchParams(data)
                })
                .then(res => res.text())
                .then(console.log)
                .catch(console.error);

            });
        </script>


        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    </body>
</html>
